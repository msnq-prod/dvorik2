# =============================================================================
# Мармеладный Дворик - Environment Configuration Template
# =============================================================================
# Скопируйте этот файл в .env и заполните своими значениями
# Команда: cp .env.example .env
# =============================================================================

# -----------------------------------------------------------------------------
# Database Configuration
# -----------------------------------------------------------------------------
# Async database URL для SQLAlchemy (используется asyncmy для async operations)
DB_URL=mysql+asyncmy://marmeladny:marmeladny_password@localhost:3306/marmeladny_dvorik

# Connection pool settings (опционально, есть defaults)
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20
DB_POOL_RECYCLE=3600

# -----------------------------------------------------------------------------
# Redis Configuration
# -----------------------------------------------------------------------------
# Redis URL для кэширования, FSM states и Celery broker
REDIS_URL=redis://localhost:6379/0

# -----------------------------------------------------------------------------
# Telegram Bots Configuration
# -----------------------------------------------------------------------------
# Токен основного бота (получить у @BotFather)
TELEGRAM_MAIN_BOT_TOKEN=1234567890:ABCdefGHIjklMNOpqrsTUVwxyz1234567890

# Токен бота для кассиров и админов (получить у @BotFather)
TELEGRAM_AUTH_BOT_TOKEN=0987654321:ZYXwvuTSRqponMLKjiHGFedcba0987654321

# ID Telegram канала для проверки подписки (с @)
TELEGRAM_CHANNEL_ID=@marmeladny_dvorik

# -----------------------------------------------------------------------------
# Admin Configuration
# -----------------------------------------------------------------------------
# Telegram ID первого суперадмина (получить у @userinfobot)
FIRST_SUPERADMIN_TG_ID=123456789

# -----------------------------------------------------------------------------
# Security Configuration
# -----------------------------------------------------------------------------
# JWT Secret Key для подписи токенов (минимум 32 символа)
# Генерация: openssl rand -hex 32
JWT_SECRET_KEY=your_jwt_secret_key_here_minimum_32_characters_required

# JWT Algorithm (по умолчанию HS256)
JWT_ALGORITHM=HS256

# JWT Token expiration в минутах (по умолчанию 43200 = 30 дней)
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=43200

# Internal API Key для служебных endpoints (минимум 32 символа)
# Генерация: openssl rand -hex 32
INTERNAL_API_KEY=your_internal_api_key_here_minimum_32_characters

# -----------------------------------------------------------------------------
# Application Settings
# -----------------------------------------------------------------------------
# Environment: development, staging, production
ENVIRONMENT=development

# Debug mode (true для development, false для production)
DEBUG=false

# API Host и Port
API_HOST=0.0.0.0
API_PORT=8000

# CORS Origins (через запятую)
CORS_ORIGINS=http://localhost:3000,http://localhost:8000,http://localhost:5555

# Log Level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# Timezone (по умолчанию Asia/Vladivostok)
TZ=Asia/Vladivostok

# -----------------------------------------------------------------------------
# Webhook Configuration
# -----------------------------------------------------------------------------
# Base URL для Telegram webhooks (ваш публичный домен)
WEBHOOK_BASE_URL=https://yourdomain.com

# Webhook paths (опционально, есть defaults)
WEBHOOK_PATH_MAIN=/webhooks/main-bot
WEBHOOK_PATH_AUTH=/webhooks/auth-bot

# -----------------------------------------------------------------------------
# Celery Configuration
# -----------------------------------------------------------------------------
# Celery timezone (по умолчанию Asia/Vladivostok)
CELERY_TIMEZONE=Asia/Vladivostok

# -----------------------------------------------------------------------------
# Birthday Task Configuration
# -----------------------------------------------------------------------------
# Час проверки дней рождения (0-23, по умолчанию 9)
BIRTHDAY_CHECK_HOUR=9

# Минута проверки дней рождения (0-59, по умолчанию 0)
BIRTHDAY_CHECK_MINUTE=0

# -----------------------------------------------------------------------------
# Broadcast Settings
# -----------------------------------------------------------------------------
# Скорость отправки рассылок (сообщений в минуту, 1-30)
DEFAULT_BROADCAST_RATE_PER_MINUTE=25

# -----------------------------------------------------------------------------
# Cache Configuration
# -----------------------------------------------------------------------------
# TTL для кэша статуса подписки в секундах (30-300, по умолчанию 60)
SUBSCRIPTION_CACHE_TTL=60

# -----------------------------------------------------------------------------
# Code Generation
# -----------------------------------------------------------------------------
# Префикс для кодов скидок (опционально)
CODE_PREFIX=

# Длина генерируемых кодов (7-32, по умолчанию 7)
CODE_LENGTH=7

# -----------------------------------------------------------------------------
# Telegram Rate Limiting
# -----------------------------------------------------------------------------
# Rate limit для Telegram API (сообщений в минуту, 1-30)
TELEGRAM_RATE_LIMIT_PER_MINUTE=25

# Backoff factor для retry (по умолчанию 2.0)
TELEGRAM_RETRY_BACKOFF_FACTOR=2.0

# Максимальное количество retry попыток (1-10, по умолчанию 3)
TELEGRAM_MAX_RETRIES=3

# -----------------------------------------------------------------------------
# Docker MySQL Configuration (для docker-compose)
# -----------------------------------------------------------------------------
# MySQL Root Password (для Docker)
MYSQL_ROOT_PASSWORD=rootpassword

# MySQL User (для Docker)
MYSQL_USER=marmeladny

# MySQL Password (для Docker)
MYSQL_PASSWORD=marmeladny_password

# -----------------------------------------------------------------------------
# Monitoring & Observability (Optional)
# -----------------------------------------------------------------------------
# Sentry DSN для error tracking (опционально)
# SENTRY_DSN=

# =============================================================================
# Notes:
# - Все переменные с комментарием "(опционально)" имеют разумные defaults
# - Обязательные: DB_URL, REDIS_URL, TELEGRAM_*_BOT_TOKEN, JWT_SECRET_KEY, 
#   INTERNAL_API_KEY, WEBHOOK_BASE_URL
# - Для production обязательно измените все секретные ключи!
# =============================================================================
